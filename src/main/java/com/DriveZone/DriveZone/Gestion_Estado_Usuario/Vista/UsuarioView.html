<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Gestión de Usuarios</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script>
function actualizarEstado(usuarioId) {
    let estado = document.getElementById('estado-' + usuarioId).value;
    let contenido = usuarioId + ',' + estado;
    let blob = new Blob([contenido], { type: 'text/plain' });
    let a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'estado.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    alert('Estado guardado. Java lo actualizará en la base de datos.');
}
function normalizarTexto(texto) {
    return texto.normalize('NFD').replace(/[̀-ͯ]/g, '').toLowerCase();
}
function filtrarUsuarios() {
    let input = document.getElementById('busqueda').value;
    let filtro = normalizarTexto(input);
    let filas = document.querySelectorAll('tbody tr');
    filas.forEach(fila => {
        let nombre = normalizarTexto(fila.cells[2].innerText);
        let apellido = normalizarTexto(fila.cells[3].innerText);
        fila.style.display = (nombre.includes(filtro) || apellido.includes(filtro)) ? '' : 'none';
    });
}
</script>
</head><body>
<div class="container">
<h2>Gestión de Usuarios</h2>
<div class="mb-3">
<input type="text" class="form-control" id="busqueda" placeholder="Ingrese nombre o apellido" onkeyup="filtrarUsuarios()">
</div>
<div class="table-container">
<table class="table table-striped table-bordered">
<thead class="table-dark">
<tr>
<th>ID</th><th>Nombre de Usuario</th><th>Nombres</th><th>Apellidos</th><th>Cédula</th><th>Correo</th><th>Dirección</th><th>Teléfono</th><th>Estado</th><th>Acción</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>juan.perez</td>
<td>Juan</td>
<td>Pérez</td>
<td>1234567890</td>
<td>juan.perez@drivezone.com</td>
<td>Calle 123</td>
<td>5551234567</td>
<td><select id='estado-1' class='form-select'>
<option value='ACTIVO' >ACTIVO</option>
<option value='INACTIVO' selected>INACTIVO</option>
<option value='FUERA_DE_SERVICIO' >FUERA_DE_SERVICIO</option>
</select></td>
<td><button class='btn btn-update' onclick='actualizarEstado(1)'>Actualizar</button></td>
</tr>
<tr>
<td>2</td>
<td>ana.gomez</td>
<td>Ana</td>
<td>Gómez</td>
<td>0987654321</td>
<td>ana.gomez@drivezone.com</td>
<td>Avenida 456</td>
<td>5557654321</td>
<td><select id='estado-2' class='form-select'>
<option value='ACTIVO' >ACTIVO</option>
<option value='INACTIVO' selected>INACTIVO</option>
<option value='FUERA_DE_SERVICIO' >FUERA_DE_SERVICIO</option>
</select></td>
<td><button class='btn btn-update' onclick='actualizarEstado(2)'>Actualizar</button></td>
</tr>
<tr>
<td>3</td>
<td>carlos.ramirez</td>
<td>Carlos</td>
<td>Ramírez</td>
<td>1122334455</td>
<td>carlos.ramirez@drivezone.com</td>
<td>Calle 789</td>
<td>5551122334</td>
<td><select id='estado-3' class='form-select'>
<option value='ACTIVO' >ACTIVO</option>
<option value='INACTIVO' selected>INACTIVO</option>
<option value='FUERA_DE_SERVICIO' >FUERA_DE_SERVICIO</option>
</select></td>
<td><button class='btn btn-update' onclick='actualizarEstado(3)'>Actualizar</button></td>
</tr>
<tr>
<td>4</td>
<td>maria.lopez</td>
<td>María</td>
<td>López</td>
<td>5566778899</td>
<td>maria.lopez@gmail.com</td>
<td>Calle 321</td>
<td>5555566778</td>
<td><select id='estado-4' class='form-select'>
<option value='ACTIVO' selected>ACTIVO</option>
<option value='INACTIVO' >INACTIVO</option>
<option value='FUERA_DE_SERVICIO' >FUERA_DE_SERVICIO</option>
</select></td>
<td><button class='btn btn-update' onclick='actualizarEstado(4)'>Actualizar</button></td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>